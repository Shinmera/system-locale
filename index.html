<!DOCTYPE html> <html xmlns="http://www.w3.org/1999/xhtml"> <head> <meta charset="utf-8"> <title>System-Locale</title> <meta name="viewport" content="width=device-width"> <meta name="description" content="System locale and language discovery"> <meta name="author" content="Nicolas Hafner &lt;shinmera@tymoon.eu&gt;"> <style type="text/css"> body{
          max-width: 1024px;
          margin: 0 auto 0 auto;
          font-family: sans-serif;
          color: #333333;
          font-size: 14pt;
          padding: 5px;
      }
      body>header{
          display:flex;
          align-items: center;
          justify-content: center;
          flex-direction: column;
          max-width: 100%;
          text-align: center;
      }
      body>header img{
          max-width: 50%;
      }
      img{
          max-width: 100%;
          max-height: 100%;
      }
      code{
          font-family: Consolas, Inconsolata, monospace;
      }
      a{
          text-decoration: none;
          color: #0055AA;
      }
      a img{
          border: none;
      }
      #documentation{
          text-align: justify;
      }
      #documentation pre{
          margin-left: 20px;
          overflow: auto;
      }
      #documentation img{
          margin: 5px;
      }
      #symbol-index>ul{
          list-style: none;
          padding: 0;
      }
      #symbol-index .package>ul{
          list-style: none;
          padding: 0 0 0 10px;
      }
      #symbol-index .package .nicknames{
          font-weight: normal;
      }
      #symbol-index .package h4{
          display: inline-block;
          margin: 0;
      }
      #symbol-index .package article{
          margin: 0 0 15px 0;
      }
      #symbol-index .package article header{
          font-size: 1.2em;
          font-weight: normal;
      }
      #symbol-index .package .name{
          margin-right: 5px;
      }
      #symbol-index .package .docstring{
          margin: 0 0 0 15px;
          white-space: pre-wrap;
          font-size: 12pt;
      }
      @media (max-width: 800px){
          body{font-size: 12pt;}
      } </style> </head> <body> <header> <h1>system-locale</h1> <span class="version">1.0.0</span> <p class="description">System locale and language discovery</p> </header> <main> <article id="documentation">  <div><h2>About System-Locale</h2> <p>This library retrieves locale information configured on the system. This is helpful if you want to write applications and libraries that display messages in the user's native language.</p> <h2>How To</h2> <p>Primarily you'll want to use the functions <code><a href="#SYSTEM-LOCALE:LOCALE">locale</a></code> and <code><a href="#SYSTEM-LOCALE:LANGUAGE">language</a></code> to retrieve the information. You can also <code><a href="http://l1sp.org/cl/setf">setf</a></code> them if you want to force a particular setting.</p> <pre><code>(<a href="#SYSTEM-LOCALE:LOCALE">system-locale:locale</a>)   ; =&gt; &quot;en_GB.UTF-8&quot;
(<a href="#SYSTEM-LOCALE:LANGUAGE">system-locale:language</a>) ; =&gt; &quot;en&quot;
</code></pre> <p>The functions <code><a href="#SYSTEM-LOCALE:DISCOVER-ACTIVE-LOCALES">discover-active-locales</a></code> and <code><a href="#SYSTEM-LOCALE:DISCOVER-ACTIVE-LANGUAGES">discover-active-languages</a></code> describe how the locale and language discovery is handled.</p> </div>  </article> <article id="copyright">  <h2>Copyright</h2> <span>system-locale</span> is licensed under the <span><a href="https://tldrlegal.com/search?q=Artistic">Artistic</a></span> license.  Â© <span>Nicolas Hafner &lt;shinmera@tymoon.eu&gt;</span> .  This library can be obtained on <a href="https://github.com/Shinmera/system-language">https://github.com/Shinmera/system-language</a>.  </article>  <article id="symbol-index"> <h2>Package Index</h2> <ul> <li class="package"> <h3> <a name="SYSTEM-LOCALE" href="#SYSTEM-LOCALE">SYSTEM-LOCALE</a> <span class="nicknames">(ORG.SHIRAKUMO.SYSTEM-LOCALE)</span> </h3> <ul> <li> <a name="SYSTEM-LOCALE:*FALLBACK-LOCALE*"> </a> <article id="SPECIAL SYSTEM-LOCALE:*FALLBACK-LOCALE*"> <header class="special"> <span class="type">special</span>  <h4 class="name"><code><a href="#SPECIAL%20SYSTEM-LOCALE%3A%2AFALLBACK-LOCALE%2A">*FALLBACK-LOCALE*</a></code></h4>  </header> <div class="docstring"><pre>The default fallback locale used if no system locale can be discovered.

This is, by default, en_US.UTF-8.

See <a href="#SYSTEM-LOCALE:LOCALE">LOCALE</a></pre></div> </article> </li>  <li> <a name="SYSTEM-LOCALE:*LANGUAGES*"> </a> <article id="SPECIAL SYSTEM-LOCALE:*LANGUAGES*"> <header class="special"> <span class="type">special</span>  <h4 class="name"><code><a href="#SPECIAL%20SYSTEM-LOCALE%3A%2ALANGUAGES%2A">*LANGUAGES*</a></code></h4>  </header> <div class="docstring"><pre>The list of user-preferred languages, with the most preferred first.

This list is empty if no user-preferences could be found.
This variable is unbound if LANGUAGES has not yet been called.

See <a href="#SYSTEM-LOCALE:LANGUAGES">LANGUAGES</a>
See <a href="#SYSTEM-LOCALE:LANGUAGE">LANGUAGE</a></pre></div> </article> </li>  <li> <a name="SYSTEM-LOCALE:*LOCALES*"> </a> <article id="SPECIAL SYSTEM-LOCALE:*LOCALES*"> <header class="special"> <span class="type">special</span>  <h4 class="name"><code><a href="#SPECIAL%20SYSTEM-LOCALE%3A%2ALOCALES%2A">*LOCALES*</a></code></h4>  </header> <div class="docstring"><pre>The list of user-preferred locales, with the most preferred first.

This list is empty if no user-preferences could be found.
This variable is unbound if LOCALES has not yet been called.

See <a href="#SYSTEM-LOCALE:LOCALES">LOCALES</a>
See <a href="#SYSTEM-LOCALE:LOCALE">LOCALE</a></pre></div> </article> </li>  <li> <a name="SYSTEM-LOCALE:LANGUAGE"> </a> <article id="ACCESSOR SYSTEM-LOCALE:LANGUAGE"> <header class="accessor"> <span class="type">accessor</span>  <code>(</code><h4 class="name"><code><a href="#ACCESSOR%20SYSTEM-LOCALE%3ALANGUAGE">LANGUAGE</a></code></h4> <code class="qualifiers"></code> <code class="arguments">&amp;REST SUPPORTED</code><code>)</code>  </header> <div class="docstring"><pre>Accessor to the user-preferred language.

This returns the first matching item returned by LANGUAGES,
or the language-code part of *FALLBACK-LOCALE* if no match
by STRING-EQUAL is found.

If the fallback language was returned, the secondary value
is :FALLBACK.

Setting this place will add the given language to the
*LANGUAGES* list if it is not yet present, and otherwise
move it to the front of the list.

See <a href="#SYSTEM-LOCALE:LANGUAGES">LANGUAGES</a>
See <a href="#SYSTEM-LOCALE:*FALLBACK-LOCALE*">*FALLBACK-LOCALE*</a></pre></div> </article> </li>  <li> <a name="SYSTEM-LOCALE:LANGUAGES"> </a> <article id="ACCESSOR SYSTEM-LOCALE:LANGUAGES"> <header class="accessor"> <span class="type">accessor</span>  <code>(</code><h4 class="name"><code><a href="#ACCESSOR%20SYSTEM-LOCALE%3ALANGUAGES">LANGUAGES</a></code></h4> <code class="qualifiers"></code> <code class="arguments">&amp;KEY REDISCOVER</code><code>)</code>  </header> <div class="docstring"><pre>Accessor to the list of user-preferred languages.

This may be NIL if no preferred languages have been found.
If REDISCOVER is non-NIL, DISCOVER-ACTIVE-LANGUAGES is
always called. Otherwise, if the *LANGUAGES* variable is
bound, its value is returned instead.

See <a href="#SYSTEM-LOCALE:*LANGUAGES*">*LANGUAGES*</a>
See <a href="#SYSTEM-LOCALE:DISCOVER-ACTIVE-LANGUAGES">DISCOVER-ACTIVE-LANGUAGES</a></pre></div> </article> </li>  <li> <a name="SYSTEM-LOCALE:LOCALE"> </a> <article id="ACCESSOR SYSTEM-LOCALE:LOCALE"> <header class="accessor"> <span class="type">accessor</span>  <code>(</code><h4 class="name"><code><a href="#ACCESSOR%20SYSTEM-LOCALE%3ALOCALE">LOCALE</a></code></h4> <code class="qualifiers"></code> <code class="arguments">&amp;REST SUPPORTED</code><code>)</code>  </header> <div class="docstring"><pre>Accessor to the user-preferred locale.

This returns the first matching item returned by LOCALES,
or *FALLBACK-LOCALE* if no match by LOCALE-EQUAL is found.

If the fallback locale was returned, the secondary value
is :FALLBACK.

Setting this place will add the given locale to the
*LOCALES* list if it is not yet present, and otherwise
move it to the front of the list.

See <a href="#SYSTEM-LOCALE:LOCALE-EQUAL">LOCALE-EQUAL</a>
See <a href="#SYSTEM-LOCALE:LOCALES">LOCALES</a>
See <a href="#SYSTEM-LOCALE:*FALLBACK-LOCALE*">*FALLBACK-LOCALE*</a></pre></div> </article> </li>  <li> <a name="SYSTEM-LOCALE:LOCALES"> </a> <article id="ACCESSOR SYSTEM-LOCALE:LOCALES"> <header class="accessor"> <span class="type">accessor</span>  <code>(</code><h4 class="name"><code><a href="#ACCESSOR%20SYSTEM-LOCALE%3ALOCALES">LOCALES</a></code></h4> <code class="qualifiers"></code> <code class="arguments">&amp;KEY REDISCOVER</code><code>)</code>  </header> <div class="docstring"><pre>Accessor to the list of user-preferred locales.

This may be NIL if no preferred locales have been found.
If REDISCOVER is non-NIL, DISCOVER-ACTIVE-LOCALES is
always called. Otherwise, if the *LOCALES* variable is
bound, its value is returned instead.

See <a href="#SYSTEM-LOCALE:*LOCALES*">*LOCALES*</a>
See <a href="#SYSTEM-LOCALE:DISCOVER-ACTIVE-LOCALES">DISCOVER-ACTIVE-LOCALES</a></pre></div> </article> </li>  <li> <a name="SYSTEM-LOCALE:DISCOVER-ACTIVE-LANGUAGES"> </a> <article id="FUNCTION SYSTEM-LOCALE:DISCOVER-ACTIVE-LANGUAGES"> <header class="function"> <span class="type">function</span>  <code>(</code><h4 class="name"><code><a href="#FUNCTION%20SYSTEM-LOCALE%3ADISCOVER-ACTIVE-LANGUAGES">DISCOVER-ACTIVE-LANGUAGES</a></code></h4> <code class="qualifiers"></code> <code class="arguments"></code><code>)</code>  </header> <div class="docstring"><pre>Attempts to discover user-preferred system languages.

Returns a list of found language codes.
It considers the following environment variables:

- LANGUAGE

In addition it will extract the language code from all
locales returned by DISCOVER-ACTIVE-LOCALES.

See <a href="#SYSTEM-LOCALE:DISCOVER-ACTIVE-LOCALES">DISCOVER-ACTIVE-LOCALES</a>
See <a href="#SYSTEM-LOCALE:LANGUAGES">LANGUAGES</a></pre></div> </article> </li>  <li> <a name="SYSTEM-LOCALE:DISCOVER-ACTIVE-LOCALES"> </a> <article id="FUNCTION SYSTEM-LOCALE:DISCOVER-ACTIVE-LOCALES"> <header class="function"> <span class="type">function</span>  <code>(</code><h4 class="name"><code><a href="#FUNCTION%20SYSTEM-LOCALE%3ADISCOVER-ACTIVE-LOCALES">DISCOVER-ACTIVE-LOCALES</a></code></h4> <code class="qualifiers"></code> <code class="arguments"></code><code>)</code>  </header> <div class="docstring"><pre>Attempts to discover user-preferred system locales.

Returns a list of found locales.
It considers the following environment variables:

- LC_ALL
- LC_MESSAGES
- LANG

On Windows, it also considers the following WINAPI calls:

- GetUserDefaultLocaleName
- GetSystemDefaultLocaleName

See <a href="#SYSTEM-LOCALE:LOCALES">LOCALES</a></pre></div> </article> </li>  <li> <a name="SYSTEM-LOCALE:LOCALE-CHARSET"> </a> <article id="FUNCTION SYSTEM-LOCALE:LOCALE-CHARSET"> <header class="function"> <span class="type">function</span>  <code>(</code><h4 class="name"><code><a href="#FUNCTION%20SYSTEM-LOCALE%3ALOCALE-CHARSET">LOCALE-CHARSET</a></code></h4> <code class="qualifiers"></code> <code class="arguments">LOCALE</code><code>)</code>  </header> <div class="docstring"><pre>Returns the charset-code part of a locale.

  &quot;en_US.UTF-8&quot; =&gt; &quot;UTF-8&quot;
  &quot;en_US&quot;       =&gt; NIL
  &quot;en.UTF-8&quot;    =&gt; &quot;UTF-8&quot;
  &quot;en&quot;          =&gt; NIL
  &quot;_US.UTF-8&quot;   =&gt; &quot;UTF-8&quot;
  &quot;_US&quot;         =&gt; NIL
  &quot;.UTF-8&quot;      =&gt; &quot;UTF-8</pre></div> </article> </li>  <li> <a name="SYSTEM-LOCALE:LOCALE-EQUAL"> </a> <article id="FUNCTION SYSTEM-LOCALE:LOCALE-EQUAL"> <header class="function"> <span class="type">function</span>  <code>(</code><h4 class="name"><code><a href="#FUNCTION%20SYSTEM-LOCALE%3ALOCALE-EQUAL">LOCALE-EQUAL</a></code></h4> <code class="qualifiers"></code> <code class="arguments">A B</code><code>)</code>  </header> <div class="docstring"><pre>Returns true if the two locales are equal.

Equal means that all the locale parts that are
given in both locales match.

  &quot;en&quot; &quot;en_US&quot;  =&gt; T
  &quot;en_GB&quot; &quot;_US&quot; =&gt; NIL
  etc.</pre></div> </article> </li>  <li> <a name="SYSTEM-LOCALE:LOCALE-LANGUAGE"> </a> <article id="FUNCTION SYSTEM-LOCALE:LOCALE-LANGUAGE"> <header class="function"> <span class="type">function</span>  <code>(</code><h4 class="name"><code><a href="#FUNCTION%20SYSTEM-LOCALE%3ALOCALE-LANGUAGE">LOCALE-LANGUAGE</a></code></h4> <code class="qualifiers"></code> <code class="arguments">LOCALE</code><code>)</code>  </header> <div class="docstring"><pre>Returns the language-code part of a locale.

  &quot;en_US.UTF-8&quot; =&gt; &quot;en&quot;
  &quot;en_US&quot;       =&gt; &quot;en&quot;
  &quot;en.UTF-8&quot;    =&gt; &quot;en&quot;
  &quot;en&quot;          =&gt; &quot;en&quot;
  &quot;_US.UTF-8&quot;   =&gt; NIL
  &quot;_US&quot;         =&gt; NIL
  &quot;.UTF-8&quot;      =&gt; NIL</pre></div> </article> </li>  <li> <a name="SYSTEM-LOCALE:LOCALE-REGION"> </a> <article id="FUNCTION SYSTEM-LOCALE:LOCALE-REGION"> <header class="function"> <span class="type">function</span>  <code>(</code><h4 class="name"><code><a href="#FUNCTION%20SYSTEM-LOCALE%3ALOCALE-REGION">LOCALE-REGION</a></code></h4> <code class="qualifiers"></code> <code class="arguments">LOCALE</code><code>)</code>  </header> <div class="docstring"><pre>Returns the language region-code part of a locale.

  &quot;en_US.UTF-8&quot; =&gt; &quot;US&quot;
  &quot;en_US&quot;       =&gt; &quot;US&quot;
  &quot;en.UTF-8&quot;    =&gt; NIL
  &quot;en&quot;          =&gt; NIL
  &quot;_US.UTF-8&quot;   =&gt; &quot;US&quot;
  &quot;_US&quot;         =&gt; &quot;US&quot;
  &quot;.UTF-8&quot;      =&gt; NIL</pre></div> </article> </li> </ul> </li> </ul> </article>  </main> </body> </html> 